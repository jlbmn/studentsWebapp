<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<div th:replace="fragments/header :: header"></div>
<head>
  <title>Index</title>
	<!-- link to our customized CSS stylesheet -->
    <link th:href="@{/css/style.css}" rel="stylesheet">
</head>

    <div class="container">
    
    	<h3 th:utext="${message}" class="text-primary m-2"></h3>

      <!-- search form -->
        <div>
          <div class="mx-auto m-5 p-4 rounded-pill text-white border" style="width: 80%; background: #0D54AF;">
            <h2 class="text-center">Trouvez votre fiche de révision...</h2>
            <form class="form-inline" action="/results" method="post">
              <div class="input-group">
                <input type="text" name ="field" class="form-control form-control-lg rounded-pill m-1" list="fields" autocomplete="off" placeholder="Entrez une matière...">
                <datalist id="fields">
                	<option th:each="fiche : ${fields}"
                			th:value="${fiche}"
                			th:text="${fiche}"></option>
                </datalist>
                <button type="submit" class="btn btn-lg rounded-circle m-1" style="background: #8BBAF5;"><i class="bi bi-search"></i></button>
              </div>
            </form>
          </div>
        <div style="height: 2em;"></div>
        </div>

        <!-- nav with javascript behavior -->
          <div class="mt-5 rounded" >
            <ul class="nav nav-tabs nav-fill fs-5 rounded " id="myTab" role="tablist">
              <li class="nav-item" role="presentation">
                <a class="nav-link active link-secondary" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" role="tab" aria-controls="home" aria-selected="true">Top des fiches....</a>
              </li>
              <li class="nav-item" role="presentation">
                <a class="nav-link link-secondary" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile" role="tab" aria-controls="profile" aria-selected="false">Top des auteurs...</a>
              </li>
            </ul>

            <div class="tab-content m-2 p-2" id="myTabContent">
              <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab" >
                <div class="d-grid gap-3 m-2" th:each="fiche:${fiches}">
                  <div class="module-wrap-gradient">
                  <div class="pb-1" >
                    <div class="grid bg-light-blue">
                      <div class="row align-items-center text-center" >
                        <div class="col" th:utext="${fiche.title}"> </div>
                        <div class="col" th:utext="${fiche.field}"> </div>
                        <div class="col"> <span th:utext="${fiche.like}"></span> <i class="bi bi-hand-thumbs-up"></i></div>
                        <div class="col" th:utext="${fiche.user.pseudo}"> </div>
                        <div class="col" th:utext="${fiche.abstractText}">
                        
<!-- link to abstract modal --> 
<!-- 						<a href="#" data-bs-toggle="modal" data-bs-target="#staticBackdrop" > -->
<!-- 						  Abstract -->
<!-- 						</a> -->
<!-- Modal --> 
<!-- 						<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true"> -->
<!-- 						  <div class="modal-dialog"> -->
<!-- 						    <div class="modal-content"> -->
<!-- 						      <div class="modal-header" > -->
<!-- 						        <h5 class="modal-title" id="staticBackdropLabel" th:utext="${fiche.title}"></h5> -->
<!-- 						        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> -->
<!-- 						      </div> -->
<!-- 						      <div class="modal-body"><span th:utext="${fiche.abstractText}"></span> </div> -->
<!-- 						      <div class="modal-footer"> -->
<!-- 						        <button type="button" class="btn btn-secondary btn-lg" data-bs-dismiss="modal">Close</button> -->
<!-- 						      </div> -->
<!-- 						    </div> -->
<!-- 						  </div> -->
<!-- 						</div> -->
						
                        </div>
                        <div class="col" >
							<form action="/displayPdf" method="post" th:action="@{/displayPdf}" th:object="${fiche}">
								<input type="hidden" th:value="${fiche.ficheId}" name="ficheId"/>
                          		<button type="submit" class="btn btn-lg rounded-circle m-1" style="background: #8BBAF5;" ><i class="bi bi-arrow-90deg-right"></i></button>
                        	</form>
						</div>
                      </div>
                    </div>
                  </div>
                  </div>
                </div>
                </div>
              
              

              <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                <div class="d-grid gap-3 m-2" th:each="author:${authors}">
                  <div class="module-wrap-gradient">
                    <div class="pb-1">
                      <div class="grid bg-light-blue">
                        <div class="row align-items-center text-center">
                          <div class="col"><span><img class="avatar-img" th:src="${author.profilPic}"></span></div>
                          <div class="col" th:utext="${author.pseudo}"></div>
                          <div class="col"><span th:utext="${dicoAuthorLike.get(author)}"></span> <i class="bi bi-hand-thumbs-up"></i></div>
                          <div class="col"><span th:utext="${author.publicationNb}"></span> fiches publiées</div>
                          <div class="col">
                         	 <form action="/profile" method="post" th:action="@{/profile}" th:object="${user}">
                          		<input type="hidden" th:value="${author.userId}" name="userId"/>
                          		<button type="submit" class="btn btn-lg rounded-circle m-1" style="background: #8BBAF5;"><i class="bi bi-arrow-90deg-right"></i></button>
                          	</form>	
                          </div>
                        </div>
                      </div>
                    </div>
                    </div>
                  
                </div>
            </div>
          </div>

      </div>

    </div>

</html>
